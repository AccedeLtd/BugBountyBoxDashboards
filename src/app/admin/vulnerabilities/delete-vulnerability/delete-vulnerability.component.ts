import { Component, Inject, OnInit } from '@angular/core';
import { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';
import { AdminService } from 'src/app/core/_services/admin.services';
import { NotificationService } from 'src/app/core/_services/notification.service';

@Component({
  selector: 'app-delete-vulnerability',
  templateUrl: './delete-vulnerability.component.html',
  styleUrls: ['./delete-vulnerability.component.css']
})
export class DeleteVulnerabilityComponent implements OnInit {

  constructor(
    @Inject(MAT_DIALOG_DATA) public data: number,
    private adminService:AdminService,
    private dialogRef: MatDialogRef<DeleteVulnerabilityComponent>,
    private notifyService:NotificationService
  ) { }

  ngOnInit(): void {
  }

  DeleteVulnerabilityFromAdmin(){
    this.adminService.deleteVulnerability(this.data).subscribe(
      results => {
        if(results.success){
          this.notifyService.showSuccess('vulnerability was deleted successfully','Congratulations');
          this.dialogRef.close({ data: this.data })
        }
        if(!results.success){
          this.notifyService.showError('vulnerability was not deleted successfully','Sorry');
        }
      }
    )
  }

}
